<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">        
        <!-- header code from alexcican.com -->
        <title> Responsive Comment Forms |  Peter Mumford</title>
        <meta name="viewport" content="width=device-width">
		<link href='http://fonts.googleapis.com/css?family=Old+Standard+TT:400,400italic,700' rel='stylesheet'>
        <link rel="stylesheet" href="/css/style.css">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    </head>
    <body>
    <div id="wrapper" class="clearfix">

<div class="header clearfix">
	<p class="vcard">
	<span class="fn">Peter Mumford</span><br>
	<span class="locality">Somerville</span>, <span class="region">MA</span><br>
	<span class="email"><a href="mailto:sunraydust@gmail.com" >sunraydust@gmail.com</a></span><br>
	<span class="tel">781&middot;960&middot;7049</span>
	</p>
	<h1 class="sitename"><a href="/">Peter Mumford&rsquo;s <span>W</span>ordPress Dev Blog</a></h1>
	<h3 class="subhead">Problem Solving for Website Owners and Designers <i class='fa fa-umbrella fa-lg'></i></h2>
</div>        	

<div class="clearfix">
	<div class="post">
		<div class="content">
			<h1 class="posttitle">Responsive Comment Forms</h1>
			<p class="meta">29 May 2013</p>
			<p>After you make the front page of your theme responsive (see my <a href="href=%22http://topheavypilesofbooks.com/2012/10/coding-a-responsive-site/">previous post</a> ), you need to check the other templates. And one area that might break your theme, and resists the simple CSS-media-queries method, is<strong> the comments form,</strong> typically loaded on the single post template. </p>

<p>That&#39;s because forms tend to have fixed widths, and whats more, the width is defined with inline HTML, or at least its defined that way by default in the Wordpress comments template. The template outputs the following HTML for the Name field:</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">&quot;author&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">aria-required=</span><span class="s">&quot;true&quot;</span> <span class="na">size=</span><span class="s">&quot;30&quot;</span> <span class="na">value=</span><span class="s">&quot;&quot;</span> <span class="na">name=</span><span class="s">&quot;author&quot;</span><span class="nt">&gt;</span>
</code></pre></div>

<p>The <code>size=&quot;30&quot;</code> is what controls the width. I don&#39;t know what units this is in.. thirty characters maybe? In any case this is impervious to CSS. There is a way to make this responsive however, and it goes back to the template hook that loads the comment forms: <code>comment_form();</code>.  It turns out that you can override the default options quite easily (see the Wordpress <a href="http://codex.wordpress.org/Function_Reference/comment_form">codex</a>). What I do is use an <code>if (is_mobile())</code> statement to load a smart phone size comment form, and an <em>else</em> statement to load the non-mobile, default comment form. The code is rather long, but here it is:</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">is_mobile</span><span class="p">())</span> <span class="p">{</span>
    <span class="nv">$args</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;comment_field&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&lt;p class=&quot;comment-form-comment&quot;&gt;&lt;label for=&quot;comment&quot;&gt;&#39;</span> <span class="o">.</span> <span class="nx">_x</span><span class="p">(</span> <span class="s1">&#39;Comment&#39;</span><span class="p">,</span> <span class="s1">&#39;noun&#39;</span> <span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;&lt;/label&gt;&lt;textarea id=&quot;comment&quot; name=&quot;comment&quot; cols=&quot;28&quot; rows=&quot;8&quot; aria-required=&quot;true&quot;&gt;&lt;/textarea&gt;&lt;/p&gt;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;fields&#39;</span> <span class="o">=&gt;</span> <span class="nx">apply_filters</span><span class="p">(</span> <span class="s1">&#39;comment_form_default_fields&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;author&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&lt;p class=&quot;comment-form-author&quot;&gt;&#39;</span> <span class="o">.</span> <span class="s1">&#39;&lt;label for=&quot;author&quot;&gt;&#39;</span> <span class="o">.</span> <span class="nx">__</span><span class="p">(</span> <span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;domainreference&#39;</span> <span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;&lt;/label&gt; &#39;</span> <span class="o">.</span> <span class="p">(</span> <span class="nv">$req</span> <span class="o">?</span> <span class="s1">&#39;&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span> <span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;&lt;input id=&quot;author&quot; name=&quot;author&quot; type=&quot;text&quot; value=&quot;&#39;</span> <span class="o">.</span> <span class="nx">esc_attr</span><span class="p">(</span> <span class="nv">$commenter</span><span class="p">[</span><span class="s1">&#39;comment_author&#39;</span><span class="p">]</span> <span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;&quot; size=&quot;27&quot;&#39;</span> <span class="o">.</span> <span class="nv">$aria_req</span> <span class="o">.</span> <span class="s1">&#39; /&gt;&lt;/p&gt;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&lt;p class=&quot;comment-form-email&quot;&gt;&lt;label for=&quot;email&quot;&gt;&#39;</span> <span class="o">.</span> <span class="nx">__</span><span class="p">(</span> <span class="s1">&#39;Email&#39;</span><span class="p">,</span> <span class="s1">&#39;domainreference&#39;</span> <span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;&lt;/label&gt; &#39;</span> <span class="o">.</span> <span class="p">(</span> <span class="nv">$req</span> <span class="o">?</span> <span class="s1">&#39;&lt;span class=&quot;required&quot;&gt;*&lt;/span&gt;&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span> <span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;&lt;input id=&quot;email&quot; name=&quot;email&quot; type=&quot;text&quot; value=&quot;&#39;</span> <span class="o">.</span> <span class="nx">esc_attr</span><span class="p">(</span> <span class="nv">$commenter</span><span class="p">[</span><span class="s1">&#39;comment_author_email&#39;</span><span class="p">]</span> <span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;&quot; size=&quot;27&quot;&#39;</span> <span class="o">.</span> <span class="nv">$aria_req</span> <span class="o">.</span> <span class="s1">&#39; /&gt;&lt;/p&gt;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&lt;p class=&quot;comment-form-url&quot;&gt;&lt;label for=&quot;url&quot;&gt;&#39;</span> <span class="o">.</span> <span class="nx">__</span><span class="p">(</span> <span class="s1">&#39;Website&#39;</span><span class="p">,</span> <span class="s1">&#39;domainreference&#39;</span> <span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;&lt;/label&gt;&#39;</span> <span class="o">.</span> <span class="s1">&#39;&lt;input id=&quot;url&quot; name=&quot;url&quot; type=&quot;text&quot; value=&quot;&#39;</span> <span class="o">.</span> <span class="nx">esc_attr</span><span class="p">(</span> <span class="nv">$commenter</span><span class="p">[</span><span class="s1">&#39;comment_author_url&#39;</span><span class="p">]</span> <span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;&quot; size=&quot;27&quot; /&gt;&lt;/p&gt;&#39;</span> 
        <span class="p">)</span> <span class="p">)</span> 
    <span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nv">$args</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">comment_form</span><span class="p">(</span><span class="nv">$args</span><span class="p">);</span> 
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>

<p>Just replace the <code>comment_form();</code> hook in your theme with the above code. And BTW, it won&#39;t work unless you have the <strong>Mobile Client Detection Plugin</strong> installed. That&#39;s what lets you use the <code>is_mobile()</code> conditional.</p>

<p>What this code is doing is defining smaller textarea fields if the user agent is &#39;mobile&#39;. See the <code>size=&quot;27&quot;</code> parts? that&#39;s the key. And for the big textarea, I use cols=&quot;28&quot;. These numbers may be &quot;magic numbers&quot;, i.e. they just happen to fit my theme with the font I use, but its no worse than the bad magic numbers that were in there before.</p>

		</div>
	</div>
	<div id="sidebar">
	  <h4>Recent Posts</h4>
	  <ul>
	    
	      <li><a href="/wordpress/switchable-one-time-or-recurring-paypal-donation-button.html">Switchable One-Time or Recurring Paypal Donation Button</a></li>
	    
	      <li><a href="/wordpress/categories-tags-and-custom-taxonomies-for-wordpress.html">Categories, Tags and Custom Taxonomies for WordPress</a></li>
	    
	      <li><a href="/wordpress/simple-related-posts-widget.html">A Simple Related Posts Widget</a></li>
	    
	      <li><a href="/wordpress/responsive-comment-forms.html">Responsive Comment Forms</a></li>
	    
	  </ul>
	</div>
</div>
		<div class="footer">
            <div class="contact">
              <p>
                Peter Mumford<br />
                Web Developer, WordPress Specialist<br />
                sunraydust@gmail.com
              </p>
            </div>
			<div class="contact">
              <p>
                <a href="https://github.com/photocurio">github.com/photocurio</a><br />
                <a href="https://twitter.com/photocurio">twitter.com/photocurio</a><br />
              </p>
            </div>
          </div>


      </div><!-- #wrapper -->
    </body>
</html>
