<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">        
        <!-- header code from alexcican.com -->
        <title> Switchable One-Time or Recurring Paypal Donation Button |  Peter Mumford</title>
        <meta name="viewport" content="width=device-width">
		<link href='http://fonts.googleapis.com/css?family=Old+Standard+TT:400,400italic,700' rel='stylesheet'>
        <link rel="stylesheet" href="/css/style.css">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    </head>
    <body>
    <div id="wrapper" class="clearfix">

<div class="header clearfix">
	<div class="hgroup">
		<h1 class="sitename"><a href="/">Peter Mumford&rsquo;s <span>W</span>ordPress Dev Blog</a></h1>
		<h3 class="slogan">Problem Solving for Website Owners and Designers <i class='fa fa-umbrella fa-lg'></i></h2>
	</div>
	<p class="vcard">
		<span class="fn">Peter Mumford</span><br>
		<span class="locality">Somerville</span>, <span class="region">MA</span><br>
		<span class="email"><a href="mailto:sunraydust@gmail.com" >sunraydust@gmail.com</a></span><br>
		<span class="tel">781&middot;960&middot;7049</span>
	</p>
</div>        	

<div class="clearfix">
	<div class="post">
		<div class="content">
			<h1 class="posttitle">Switchable One-Time or Recurring Paypal Donation Button</h1>
			<p class="meta">30 Dec 2013</p>
			<p>If you need a Paypal donation button, and you want the user to be able to select either one-time or recurring donations, its not so simple. These require completely different form submissions to Paypal.  </p>

<p>So I wrote this form, and an accompanying jQuery script. It lets the user switch back and forth between one time and recurring donation options.</p>

<p>If this is installed on a WordPress or other CMS site, it is better set up as a plugin. A site owner does not need to lose all functionality just because he/she switches themes.</p>

<p><code>
<div class="donationContainer">
    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" id="recurringHiddenInputs"> 
        <input type="hidden" name="item_name" value="Donation"> 
        <input type="hidden" name="business" value="donations@non-profit.org"> 
        <input type="hidden" name="lc" value="US"> 
        <input type="hidden" name="no_shipping" value="1"> 
        <input type="hidden" name="currency_code" value="USD"> 
        <input type="hidden" name="return" value="http://your-site.org/thankyou/"> 
        <input type="hidden" name="p3" value="1" class="recurring"> 
        <input type="hidden" name="src" value="1" class="recurring"> 
        <input type="hidden" name="no_note" value="0" class="recurring"> 
        <input type="hidden" name="bn" value="PP-DonationsBF:btn_donateCC_LG.gif:NonHostedGuest" class="recurring"> 
        <table>
            <tbody>
                <tr>
                    <td colspan="2" style="padding: 0 1px;"><h4>Donate by Paypal</h4></td>
                </tr>
                <tr>
                    <td>Please select <span><em></span></td>
                    <td>
                        <div class="radio-choice">
                            <input type="radio" name="cmd" value="_xclick-subscriptions" id="severalTimes" checked>
                            <label for="severalTimes">Recurring Donation</label>
                            <input type="radio" name="cmd" value="_donations" id="oneTime">
                            <label for="oneTime">One-time Donation</label>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="firstcol"><label for="amountInput">Donation amount ($) <span></em></span></label></td>
                    <td id="donationAmount"><input type="text" name="a3" placeholder="25" class="recurring" id="amountInput"></td>
                </tr>
                <tr id="recurringFrequency">
                    <td class="recurring"><label for="frequency">Frequency</label></td>
                    <td class="recurring"><select name="t3" id="frequency">
                        <option value="M" selected="selected">Monthly</option>
                        <option value="Y">Yearly</option>
                    </select></td>
                </tr>
                <tr>
                    <td><input type="hidden" name="on0" value="Program"> <label for="os0">Gift made to:</label></td>
                    <td><select name="os0" id="os0">
                        <option value="General Operating Budget">General Operating Fund</option>
                        <option value="Scholarship Fund">Scholarship Fund</option>
                        <option value="Equipment Fund">Equipment Fund</option>
                        <option value="Bus Maintenance">Bus Maintenance Fund</option>
                    </select></td>
                </tr>
                <tr>
                    <td><input type="hidden" name="on1" value="Dedicated to"> <label for="os1">Donation made<br>in honor of:</label></td>
                    <td><input name="os1" type="text" placeholder="name" id="os1"></td>
                </tr>
                <tr>
                    <td colspan="2" class="paypal-button">
                    <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" name="submit" alt="Donate by PayPal"></td>
                </tr>
                <tr>
                    <td colspan="2" class="required"><span>* required</span></td>
                </tr>
            </tbody>
        </table>
    </form>
</div>
</code>
It requires this bit of jQuery to switch the forms:
<code>
jQuery(document).ready(function($) {
    $(&quot;input[id=&#39;oneTime&#39;]&quot;).change(function() {
        if ($(this).is(&#39;:checked&#39;)) { 
            $(&#39;.recurring&#39;).remove();
            $(&#39;#donationAmount&#39;).append(&#39;<input type="text" name="amount" placeholder="25" class="oneTime" id="amountInput">&#39;);
        } 
    });
    $(&quot;input[id=&#39;severalTimes&#39;]&quot;).change(function() {
        if ($(this).is(&#39;:checked&#39;)) {
            $(&#39;.oneTime&#39;).remove();
            $(&#39;#recurringFrequency&#39;).append(&#39;<td class="recurring"><label for="frequency">Frequency</label></td>
                <td class="recurring"><select name="t3" id="frequency"> 
                <option value="M" selected="selected">Monthly</option> 
                <option value="Y">Yearly</option></select></td>&#39;);
            $(&#39;#recurringHiddenInputs&#39;).append(&#39; <input type="hidden" name="p3" value="1" class="recurring"> 
                <input type="hidden" name="src" value="1" class="recurring"> 
                <input type="hidden" name="no_note" value="0" class="recurring"> 
                <input type="hidden" name="bn" value="PP-DonationsBF:btn_donateCC_LG.gif:NonHostedGuest" class="recurring"> &#39;);
            $(&#39;#donationAmount&#39;).append(&#39;<input type="text" name="a3" placeholder="25" class="recurring">&#39;);
        }
    })
});
</code></p>

		</div>
	</div>
	<div id="sidebar">
	  <h4>Recent Posts</h4>
	  <ul>
	    
	      <li><a href="/wordpress/switchable-one-time-or-recurring-paypal-donation-button.html">Switchable One-Time or Recurring Paypal Donation Button</a></li>
	    
	      <li><a href="/wordpress/categories-tags-and-custom-taxonomies-for-wordpress.html">Categories, Tags and Custom Taxonomies for WordPress</a></li>
	    
	      <li><a href="/wordpress/simple-related-posts-widget.html">A Simple Related Posts Widget</a></li>
	    
	      <li><a href="/wordpress/responsive-comment-forms.html">Responsive Comment Forms</a></li>
	    
	  </ul>
	</div>
</div>
		<div class="footer">
            <div class="contact">
              <p>
                Peter Mumford<br />
                Web Developer, WordPress Specialist<br />
                sunraydust@gmail.com
              </p>
            </div>
			<div class="contact">
              <p>
                <a href="https://github.com/photocurio">github.com/photocurio</a><br />
                <a href="https://twitter.com/photocurio">twitter.com/photocurio</a><br />
              </p>
            </div>
          </div>


      </div><!-- #wrapper -->
      <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-46816784-1');ga('send','pageview');
        </script>
    </body>
</html>
