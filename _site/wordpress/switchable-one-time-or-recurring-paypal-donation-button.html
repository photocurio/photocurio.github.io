<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<!-- header code from alexcican.com -->
        <title> Switchable One-Time or Recurring Paypal Donation Button |  Peter Mumford</title>
        <meta name="viewport" content="width=device-width">
		<link href='http://fonts.googleapis.com/css?family=Old+Standard+TT:400,400italic,700' rel='stylesheet'>
        <link rel="stylesheet" href="/style.css">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
        <link rel="icon" href="/favicon.png">
        <link href='http://petermumford.net/feed.xml' rel='alternate' type='application/atom+xml'>
    </head>
    <body>
    <div id="wrapper" class="container clearfix">

<header class="hgroup content">
	<div class="hgroup col8">
		<h1 class="sitename"><a href="/">Peter Mumford&rsquo;s <span>W</span>ordPress Dev Blog</a></h1>
		<h3 class="slogan">Problem Solving for Website Owners and Designers</h2>
		<p class="intro">&mdash;by a guy who loves WordPress. And I love <a href='http://jekyllrb.com/'>Jekyll</a>.  This blog is made with Jekyll, and hosted at my <a href='https://github.com/photocurio/'>Git</a> account.</p>
	</div>
	<div class="col4">
		<p class="vcard">I live in <span class="locality">Somerville</span>, <span class="region">MA</span>.</p>
		<p>I like to sail and row boats, play chess, brew beer and read novels.</p>
		<p class="vcard"><em>tweet:</em> <span class="twitter"><a href="https://twitter.com/photocurio">@photocurio</a></span><br>
		<em>email:</em> <span class="email"><a href="mailto:sunraydust@gmail.com" >sunraydust@gmail.com</a></span></p>
	</div>
</header>        	

<div class="single content">
	<div class="post col8">
		<div class="content">
			<h1 class="posttitle">Switchable One-Time or Recurring Paypal Donation Button</h1>
			<p class="meta">December 30, 2013</p>
			<p>If you need a Paypal donation button, and you want the user to be able to select either one-time or recurring donations, its not so simple. These require completely different form submissions to Paypal.  </p>

<p>So I wrote this form, and an accompanying jQuery script. It lets the user switch back and forth between one time and recurring donation options.</p>

<p>If this is installed on a WordPress or other CMS site, it is better set up as a plugin. A site owner does not need to lose all functionality just because he/she switches themes.</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;donationContainer&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;https://www.paypal.com/cgi-bin/webscr&quot;</span> <span class="na">method=</span><span class="s">&quot;post&quot;</span> <span class="na">target=</span><span class="s">&quot;_blank&quot;</span> <span class="na">id=</span><span class="s">&quot;recurringHiddenInputs&quot;</span><span class="nt">&gt;</span> 
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;item_name&quot;</span> <span class="na">value=</span><span class="s">&quot;Donation&quot;</span><span class="nt">&gt;</span> 
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;business&quot;</span> <span class="na">value=</span><span class="s">&quot;donations@non-profit.org&quot;</span><span class="nt">&gt;</span> 
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;lc&quot;</span> <span class="na">value=</span><span class="s">&quot;US&quot;</span><span class="nt">&gt;</span> 
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;no_shipping&quot;</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span> 
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;currency_code&quot;</span> <span class="na">value=</span><span class="s">&quot;USD&quot;</span><span class="nt">&gt;</span> 
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;return&quot;</span> <span class="na">value=</span><span class="s">&quot;http://your-site.org/thankyou/&quot;</span><span class="nt">&gt;</span> 
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;p3&quot;</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span> <span class="na">class=</span><span class="s">&quot;recurring&quot;</span><span class="nt">&gt;</span> 
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;src&quot;</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span> <span class="na">class=</span><span class="s">&quot;recurring&quot;</span><span class="nt">&gt;</span> 
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;no_note&quot;</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span> <span class="na">class=</span><span class="s">&quot;recurring&quot;</span><span class="nt">&gt;</span> 
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;bn&quot;</span> <span class="na">value=</span><span class="s">&quot;PP-DonationsBF:btn_donateCC_LG.gif:NonHostedGuest&quot;</span> <span class="na">class=</span><span class="s">&quot;recurring&quot;</span><span class="nt">&gt;</span> 
        <span class="nt">&lt;table&gt;</span>
            <span class="nt">&lt;tbody&gt;</span>
                <span class="nt">&lt;tr&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">colspan=</span><span class="s">&quot;2&quot;</span> <span class="na">style=</span><span class="s">&quot;padding: 0 1px;&quot;</span><span class="nt">&gt;&lt;h4&gt;</span>Donate by Paypal<span class="nt">&lt;/h4&gt;&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
                <span class="nt">&lt;tr&gt;</span>
                    <span class="nt">&lt;td&gt;</span>Please select <span class="nt">&lt;span&gt;</span>*<span class="nt">&lt;/span&gt;&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;radio-choice&quot;</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;radio&quot;</span> <span class="na">name=</span><span class="s">&quot;cmd&quot;</span> <span class="na">value=</span><span class="s">&quot;_xclick-subscriptions&quot;</span> <span class="na">id=</span><span class="s">&quot;severalTimes&quot;</span> <span class="na">checked</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;severalTimes&quot;</span><span class="nt">&gt;</span>Recurring Donation<span class="nt">&lt;/label&gt;</span>
                            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;radio&quot;</span> <span class="na">name=</span><span class="s">&quot;cmd&quot;</span> <span class="na">value=</span><span class="s">&quot;_donations&quot;</span> <span class="na">id=</span><span class="s">&quot;oneTime&quot;</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;oneTime&quot;</span><span class="nt">&gt;</span>One-time Donation<span class="nt">&lt;/label&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
                <span class="nt">&lt;tr&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;firstcol&quot;</span><span class="nt">&gt;&lt;label</span> <span class="na">for=</span><span class="s">&quot;amountInput&quot;</span><span class="nt">&gt;</span>Donation amount ($) <span class="nt">&lt;span&gt;</span>*<span class="nt">&lt;/span&gt;&lt;/label&gt;&lt;/td&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">id=</span><span class="s">&quot;donationAmount&quot;</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;a3&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;25&quot;</span> <span class="na">class=</span><span class="s">&quot;recurring&quot;</span> <span class="na">id=</span><span class="s">&quot;amountInput&quot;</span><span class="nt">&gt;&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
                <span class="nt">&lt;tr</span> <span class="na">id=</span><span class="s">&quot;recurringFrequency&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;recurring&quot;</span><span class="nt">&gt;&lt;label</span> <span class="na">for=</span><span class="s">&quot;frequency&quot;</span><span class="nt">&gt;</span>Frequency<span class="nt">&lt;/label&gt;&lt;/td&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">&quot;recurring&quot;</span><span class="nt">&gt;&lt;select</span> <span class="na">name=</span><span class="s">&quot;t3&quot;</span> <span class="na">id=</span><span class="s">&quot;frequency&quot;</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;M&quot;</span> <span class="na">selected=</span><span class="s">&quot;selected&quot;</span><span class="nt">&gt;</span>Monthly<span class="nt">&lt;/option&gt;</span>
                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;Y&quot;</span><span class="nt">&gt;</span>Yearly<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;/select&gt;&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
                <span class="nt">&lt;tr&gt;</span>
                    <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;on0&quot;</span> <span class="na">value=</span><span class="s">&quot;Program&quot;</span><span class="nt">&gt;</span> <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;os0&quot;</span><span class="nt">&gt;</span>Gift made to:<span class="nt">&lt;/label&gt;&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;&lt;select</span> <span class="na">name=</span><span class="s">&quot;os0&quot;</span> <span class="na">id=</span><span class="s">&quot;os0&quot;</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;General Operating Budget&quot;</span><span class="nt">&gt;</span>General Operating Fund<span class="nt">&lt;/option&gt;</span>
                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;Scholarship Fund&quot;</span><span class="nt">&gt;</span>Scholarship Fund<span class="nt">&lt;/option&gt;</span>
                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;Equipment Fund&quot;</span><span class="nt">&gt;</span>Equipment Fund<span class="nt">&lt;/option&gt;</span>
                        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;Bus Maintenance&quot;</span><span class="nt">&gt;</span>Bus Maintenance Fund<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;/select&gt;&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
                <span class="nt">&lt;tr&gt;</span>
                    <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;on1&quot;</span> <span class="na">value=</span><span class="s">&quot;Dedicated to&quot;</span><span class="nt">&gt;</span> <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;os1&quot;</span><span class="nt">&gt;</span>Donation made<span class="nt">&lt;br&gt;</span>in honor of:<span class="nt">&lt;/label&gt;&lt;/td&gt;</span>
                    <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">name=</span><span class="s">&quot;os1&quot;</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;name&quot;</span> <span class="na">id=</span><span class="s">&quot;os1&quot;</span><span class="nt">&gt;&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
                <span class="nt">&lt;tr&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">colspan=</span><span class="s">&quot;2&quot;</span> <span class="na">class=</span><span class="s">&quot;paypal-button&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;image&quot;</span> <span class="na">src=</span><span class="s">&quot;https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif&quot;</span> <span class="na">name=</span><span class="s">&quot;submit&quot;</span> <span class="na">alt=</span><span class="s">&quot;Donate by PayPal&quot;</span><span class="nt">&gt;&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
                <span class="nt">&lt;tr&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">colspan=</span><span class="s">&quot;2&quot;</span> <span class="na">class=</span><span class="s">&quot;required&quot;</span><span class="nt">&gt;&lt;span&gt;</span>* required<span class="nt">&lt;/span&gt;&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
            <span class="nt">&lt;/tbody&gt;</span>
        <span class="nt">&lt;/table&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></div>

<p>It requires this bit of jQuery to switch the forms:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">jQuery</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input[id=&#39;oneTime&#39;]&quot;</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:checked&#39;</span><span class="p">))</span> <span class="p">{</span> 
            <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.recurring&#39;</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span>
            <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#donationAmount&#39;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;&lt;input type=&quot;text&quot; name=&quot;amount&quot; placeholder=&quot;25&quot; class=&quot;oneTime&quot; id=&quot;amountInput&quot;&gt;&#39;</span><span class="p">);</span>
        <span class="p">}</span> 
    <span class="p">});</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input[id=&#39;severalTimes&#39;]&quot;</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:checked&#39;</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.oneTime&#39;</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span>
            <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#recurringFrequency&#39;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;&lt;td class=&quot;recurring&quot;&gt;&lt;label for=&quot;frequency&quot;&gt;Frequency&lt;/label&gt;&lt;/td&gt;</span>
<span class="s1">               &lt;td class=&quot;recurring&quot;&gt;&lt;select name=&quot;t3&quot; id=&quot;frequency&quot;&gt; </span>
<span class="s1">               &lt;option value=&quot;M&quot; selected=&quot;selected&quot;&gt;Monthly&lt;/option&gt; </span>
<span class="s1">               &lt;option value=&quot;Y&quot;&gt;Yearly&lt;/option&gt;&lt;/select&gt;&lt;/td&gt;&#39;</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#recurringHiddenInputs&#39;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39; &lt;input type=&quot;hidden&quot; name=&quot;p3&quot; value=&quot;1&quot; class=&quot;recurring&quot;&gt; </span>
<span class="s1">               &lt;input type=&quot;hidden&quot; name=&quot;src&quot; value=&quot;1&quot; class=&quot;recurring&quot;&gt; </span>
<span class="s1">               &lt;input type=&quot;hidden&quot; name=&quot;no_note&quot; value=&quot;0&quot; class=&quot;recurring&quot;&gt; </span>
<span class="s1">               &lt;input type=&quot;hidden&quot; name=&quot;bn&quot; value=&quot;PP-DonationsBF:btn_donateCC_LG.gif:NonHostedGuest&quot; class=&quot;recurring&quot;&gt; &#39;</span><span class="p">);</span>
            <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#donationAmount&#39;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;&lt;input type=&quot;text&quot; name=&quot;a3&quot; placeholder=&quot;25&quot; class=&quot;recurring&quot;&gt;&#39;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">})</span>
<span class="p">});</span></code></pre></div>

		</div>
	</div>
	<div id="sidebar" class="col4">
	  <h2 class="widgettitle">Some Recent Posts</h2>
	  <ul>
	    
	      <li><a href="/wordpress/javascript/wordcamp-boston.html">WordCamp Boston</a></li>
	    
	      <li><a href="/wordpress/pagination-for-the-magazine-theme.html">Pagination for the Magazine Theme</a></li>
	    
	      <li><a href="/css3/soft-links.html">Soft link effects</a></li>
	    
	      <li><a href="/wordpress/switchable-one-time-or-recurring-paypal-donation-button.html">Switchable One-Time or Recurring Paypal Donation Button</a></li>
	    
	      <li><a href="/wordpress/categories-tags-and-custom-taxonomies-for-wordpress.html">Categories, Tags and Custom Taxonomies for WordPress</a></li>
	    
	      <li><a href="/wordpress/simple-related-posts-widget.html">A Simple Related Posts Widget</a></li>
	    
	      <li><a href="/wordpress/responsive-comment-forms.html">Responsive Comment Forms</a></li>
	    
	  </ul>
	</div>
</div>

     </div><!-- #wrapper, .container -->
		<script>
			(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
			function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
			e=o.createElement(i);r=o.getElementsByTagName(i)[0];
			e.src='//www.google-analytics.com/analytics.js';
			r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
			ga('create','UA-46816784-1');ga('send','pageview');
		</script>
    </body>
</html>
